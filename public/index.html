<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>PoC</title>
    <link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="./css/styles.css">
</head>
<body>
    <nav class="navbar navbar-default navbar-static-top">
        <div class="container">
            <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#" style="padding-top:8px">
                <img alt="Brand" src="./images/logo.png" width="48px">
            </a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li><a id="menu-link-dashboard" page="dashboard" href="#">Dashboard</a></li>
                <li><a id="menu-link-sensors" page="sensors" href="#">Sensors</a></li>
                <li><a id="menu-link-apps" page="applications" href="#">Applications</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a id="menu-link-settings" page="settings" href="#">Settings</a></li>
                <li><a  href="#">Logout</a></li>
            </ul>
            </div>
        </div>
        </nav>

        <div class="container container-outlet"></div>

        <footer class="footer">
        <div class="container">
            <p class="text-muted">T3chFest 2017 - 10 de Febrero - ¿Plataforma casera para IoT? ¡Es posible y es barato!</p>
        </div>
        </footer>

    <script src="./js/jquery.min.js"></script>
    <script src="./js/bootstrap.js"></script>
    <script src="./js/socket.io.js"></script>
    <script src="./js/highcharts.js"></script>
    <script src="./js/highcharts-more.js"></script>

    <script>
        $(document).ready(() => {
            Highcharts.setOptions({
                global: {
                    useUTC: false
                }
            });

            $('#menu-link-dashboard, #menu-link-sensors, #menu-link-apps, #menu-link-settings').click(function() {
                $.get($(this).attr('page') + '.html', (data) => {
                    $('.container-outlet').fadeOut(300, function() {
                        $(this).html(data);
                        $(this).fadeIn(300);
                    });
                });
            });
        });
    </script>

    <!--<script src="./js/Rx.min.js"></script>
    <script src="./js/rx-socket-subject.js"></script>-->
    <script>
        /*var socket = io.connect('ws://localhost:3000');
        socket.on('connect', function(data) {
            socket.emit('join', 'Hello World from client');
        });
 
        socket.on('msg', function(data) {
            alert('Mensaje: ' + data.resp);
        });

        socket.emit('msg', { data: 1 });*/



        var socket = RxSocketSubject.create('ws://localhost:3000');

        // use the socket subject as an Observer and send messages with onNext()
        // even though the underlying socket still hasn't been created,
        // the messages will be buffered until a socket is made and connected
        socket.onNext('one');
        socket.onNext('two');

        // subscribing to the socket subject as an Observable will start the socket and connect.
        socket.forEach(function(e) {
            console.log(e); // raw message events are emitted
        });

        setTimeout(function(){
            // while the socket is connected, onNext will send the message immediately through it.
            socket.onNext('three');
        }, 1000);
    </script>
</body>
</html>