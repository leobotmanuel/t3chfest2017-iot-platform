<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>PoC</title>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.2/socket.io.min.js"></script>
    <script src="./Rx.min.js"></script>
    <script src="./rx-socket-subject.js"></script>
    <script>
        /*var socket = io.connect('ws://localhost:3000');
        socket.on('connect', function(data) {
            socket.emit('join', 'Hello World from client');
        });
 
        socket.on('msg', function(data) {
            alert('Mensaje: ' + data.resp);
        });

        socket.emit('msg', { data: 1 });*/



        var socket = RxSocketSubject.create('ws://localhost:3000');

        // use the socket subject as an Observer and send messages with onNext()
        // even though the underlying socket still hasn't been created,
        // the messages will be buffered until a socket is made and connected
        socket.onNext('one');
        socket.onNext('two');

        // subscribing to the socket subject as an Observable will start the socket and connect.
        socket.forEach(function(e) {
            console.log(e); // raw message events are emitted
        });

        setTimeout(function(){
            // while the socket is connected, onNext will send the message immediately through it.
            socket.onNext('three');
        }, 1000);
    </script>
</body>
<body>